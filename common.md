Общие соглашения
================

ROS b OROCSO:
-------------

Версии.


ROS: пакеты, типы компонент, имена загруженных компоненты
--------------------------------------------------------

### Пакеты

Один пакет содерит описанеи нескольких типов компонент со сходным назначением.

**Прагматика** заключается в том, что компоненты со сходным назначением могут
иметь общие части (подсистема кинематических ограничений `gait_*`, загрузка urdf для 
различных версий кинематики). 

Примеры имен пакетов (отдельно нужен полный список):

* `sweetie_bot_msgs` --- базовые типы сообщений.

* `sweetie_bot_motion_switch` --- копонент `motion_switch`, базовый класс задатчика (статическая библиотека).

* `sweetie_bot_agregtor` --- агрегаторы.

* `sweetie_bot_kine_dyn` --- компоненты кинематики, динамики, классы работы с urdf (urdf дальнейшем могут быть выделены в отдельный пакет).

* `sweetie_bot_gait_*` --- походки.

* `sweetie_bot_anim_*` --- анимация.

* `sweetie_bot_servo_inv` --- обращение сервоприводов.

* `sweetie_bot_hw_herkulex` --- управление приводами Herkulex, специфичное для sweetie.

* `sweetie_bot_hw_servo` --- управление сервомашинками.


### Типы компонент

Тип компонента для OROCOS --- имя класса-наследника `TaskContext`. 
Предлагается использовать пространтва имен, соответсвующие именем пакета без префикса `sweetie_bot_*`:

    Gait::WaveGait
    Gait::TrotGait
    Anim::Greeting
    AnimExt::VeryGrownUp
    KineDyn::KinematicsKDL

Тип компонента для ROS --- имя ноды в пакете.
Роль пространства имен в данном случае уже играет сам пакет (`rosrun <package> <node>`

### Имена загруженных компонент

При загрузке компонента в память ему назначается имя.

1. Использование пространств имен ROS для разделения разных подсистем.

2. В рамках одной подсистемы (подсистемы движения) предлагается использовать префиксы. 
Имена уникальных компонент (в подсистеме может быть только один компонент такого типа, например, `agregator_gait`, `servo_inv`) 
по возможноси должны быть стандартными. Это позволяет не менять скрипты развертывания.

Примеры имен:

    gait_wave_gait
    gait_trot_gait
    anim_greeting
    kinematics_inv
    servo_inv
    

ROS: специфика написания кода
--------------------------------------------------------

Реккомендации.

1. Писать с классами или без?

OROCOS: специфика написания кода
--------------------------------------------------------

При написании кода OROCOS следует помнить есколько вещей:

1. Следует избегать прямых или косвенных вызовов `new` в `updateHook`. 
2. Помнить, что `updateHook` вызывается по любому события (включая операции), при работе с `EventPort` надо явно провереть,
пришли ли на него новые данные.

Примеры реализации компонент: ссылки


Сторонние библиотеки
--------------------

1. STL, какая версия.
2. boost?
3. OpenCV?

Стиль программирования
----------------------

0. Версия С++.
1. Разделение заголовки/реализация для классов C++
2. Сколько классов на файл и когда.
3. Отступы.
4. Стиль именования: пространства имен, классы, функции, методы, переменные.



